{"version":3,"sources":["lrc.js"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","Array","from","isArray","_arrayLikeToArray","_slicedToArray","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","o","minLen","n","prototype","toString","call","slice","constructor","name","test","len","length","arr2","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","Constructor","protoProps","staticProps","_classPrivateFieldGet","receiver","privateMap","_classApplyDescriptorGet","_classExtractFieldDescriptor","get","_classPrivateMethodGet","privateSet","fn","has","_classPrivateFieldSet","_classApplyDescriptorSet","action","set","_classCallCheck","instance","_typeof","obj","$","window","URL","webkitURL","pluginScope","player","editor","floatToPercent","float","roundTo","clearFocus","activeELement","document","activeElement","blur","LRCString","str","arguments","ts","domNode","this","trim","Duration","$domNode","_ignoreMs","WeakMap","_fromString","WeakSet","seconds","ignoreMilliseconds","add","_fromString2","parseFloat","toFixed","Math","ceil","padMinutes","time","mins","floor","minsStr","pad","String","_time$toFixed$split","split","_time$toFixed$split2","secsStr","msStr","concat","isValid","parts","dur","pop","parseInt","NaN","_$stateDiv","_$position","_$duration","_$filename","_$filetype","_$progressFill","_$progressLoaded","_$entrySticks","_$thumb","AudioPlaybackIndicator","$stateDiv","find","$progressWrap","setFileName","setProgress","showThumb","type","text","replace","toUpperCase","position","duration","html","pos","updateSeek","timeRanges","empty","start","end","append","mk","css","left","width","entries","_this","each","_","el","perc","isPlaying","_$player","_$filein","_$audiofilebtn","_audio","_mediatags","_volumeStep","_$volumedisp","_updateIndTimer","_stateInd","_startUpdateIndTimer","_stopUpdateIndTimer","AudioPlayer","_this2","attr","accept","tabindex","class","appendTo","$body","$playbackbtn","Audio","preload","$stopbtn","on","stop","updatePlaybackButtons","updateInd","enable","updateEntrySticks","setMetadataLength","$volumedown","$volumeup","resumeOnRelease","sessionVol","getSessionVolume","volume","updateVolumeButtons","e","which","hasFile","preventDefault","addClass","paused","pause","$d","hasClass","recalcThumbPos","removeClass","play","throttle","shiftKey","altKey","newvol","trigger","val","clearFile","disable","setFile","files","file","rangeLimit","round","localStorage","setItem","fileMissing","TimingEditor","getInstance","disableModeButton","children","_startUpdateIndTimer2","skipIndUpd","_stopUpdateIndTimer2","currentTime","callback","_this3","src","createObjectURL","jsmediatags","Reader","setTagsToRead","read","onSuccess","data","setMediaTags","tags","onError","error","console","log","info","Dialog","fail","Laravel","jsLocales","dialog_format_error","dialog_format_notaudio","readyState","revokeObjectURL","clearMediaTags","title","artist","getFileName","setInitialMetadata","Error","setLoaded","buffered","hlEntry","getPlaybackPosition","setEntries","getTimings","pwOffset","offset","pwWidth","relativeX","clientX","stored","getItem","isNaN","_this10","setInterval","clearInterval","LRC_META_TAGS","ar","ti","al","au","by","re","ve","LRC_TS_REGEX","LRC_META_REGEX","RegExp","keys","join","LRCParser","lrcfile","_this4","timings","metadata","dialog_parse_error_empty","lines","timestamps","match","substring","sort","a","b","_$form","MetadataEditingForm","compiledMetadata","_this5","short","long","id","inputAttrs","step","min","placeholder","for","metadata_field_placeholders","prepend","dialog_edit_meta_reset_info","dialog_edit_meta_reset_btn","clone","_mergedOutputStrategy","_$timings","_$lrcmodebtn","_$lrcfilebtn","_$filein2","_$lrcpastebtn","_$lrcexportbtn","_$lrcexportnometabtn","_$lrcmergetogglebtn","_$lrcclrbtn","_$lrcmetadatabtn","_$editor","_$entryTemplate","_lastLRCFilename","_mode","_toggleMergeStrategy","_updateMergeStrategyButton","_this6","changeMode","initialMetadata","location","href","git","commit_id","makeEntryDiv","getMergedOutputStrategyDefault","_updateMergeStrategyButton2","is","$form","dialog_pasteraw_info","request","dialog_pasteraw_title","dialog_pasteraw_action","wait","map","regenEntries","close","storeTimings","exportLRCFile","_toggleMergeStrategy2","confirm","sure","getCurrentMetadata","dialog_edit_meta","save","mkData","newMetadata","$ts","valInvalid","siblings","insertWhere","closest","$entry","updateEntryActionButtons","scrollHighlightedIntoView","remove","$button","parents","setPlaybackPosition","passSyncHandle","readLRCFile","success","mode","preservePosition","inArray","$children","modeIcon","edit","sync","otherMode","otherIcon","first","revokeSyncHandle","removeAttr","$handle","getSyncHandle","_this7","extend","lrcstring","$clone","_this8","$entries","filter","parent","_this9","reader","FileReader","onload","parsed","result","setTimings","setMetadata","dialog_parse_error","message","readAsText","nowplayingAsHandle","$nowplaying","giveSyncHandleTo","$current","$next","resetOnEnd","writeTs","$prevTs","prev","insertBefore","index","usableTimings","compare","l","r","m","comp","binarySearch","$hl","highlight","hlpos","edpos","scrl","scrollTop","newscrl","top","height","animate","includeMetadata","outputArr","k","v","strings","tsArr","output","basename","filename","blob","Blob","saveAs","$el","focus","$status","tagname","tagName","toLowerCase","getAttribute","keyCode","Key","LeftArrow","seek","RightArrow","PageUp","PageDown","Space","Period","Enter","ctrlKey","syncBreakEntry","syncEntry","UpArrow","undoSync","DownArrow","Delete","emptySync","$this","clipboardData","getData","originalEvent","queryCommandSupported","execCommand","setTimeout","not","contents","unwrap","$ist","navigator","userAgent","Plugin","jQuery"],"mappings":"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","file":"../js/lrc.js","sourcesContent":["(function ($, undefined) {\n    \"use strict\";\n\n    if (!window.URL) window.URL = window.webkitURL;\n\n    const pluginScope = {\n        player: undefined,\n        editor: undefined,\n    };\n\n    const LRC_TS_DECIMALS = 2;\n\n    function floatToPercent(float) {\n        return ($.roundTo(float, 5) * 100) + '%';\n    }\n\n    function clearFocus() {\n        const activeELement = document.activeElement;\n        if (typeof activeELement === 'object' &&activeELement !== null && 'blur' in activeELement && typeof activeELement.blur === 'function')\n            activeELement.blur();\n    }\n\n    function binarySearch(arr, compare) { // binary search, with custom compare function\n        let l = 0,\n            r = arr.length - 1;\n        while (l <= r) {\n            // jshint -W016\n            let m = l + ((r - l) >> 1),\n                comp = compare(arr[m]);\n            if (comp < 0) // arr[m] comes before the element\n                l = m + 1;\n            else if (comp > 0) // arr[m] comes after the element\n                r = m - 1;\n            else // this[m] equals the element\n                return m;\n        }\n        return l - 1; // return the index of the next left item\n                      // usually you would just return -1 in case nothing is found\n    }\n\n    class LRCString {\n        constructor(str = '', ts = undefined, domNode = null) {\n            this.str = str.trim();\n            this.ts = ts instanceof Duration ? ts : new Duration(ts);\n            this.$domNode = domNode;\n        }\n    }\n\n    class Duration {\n        #ignoreMs;\n\n        constructor(seconds, ignoreMilliseconds = false) {\n            this.#ignoreMs = ignoreMilliseconds;\n            switch (typeof seconds) {\n                case 'string':\n                    this.#fromString(seconds);\n                    break;\n                case \"number\":\n                    this.seconds = parseFloat(parseFloat(seconds).toFixed(LRC_TS_DECIMALS));\n                    if (this.#ignoreMs)\n                        this.seconds = Math.ceil(this.seconds);\n                    break;\n            }\n        }\n\n        toString(padMinutes = false) {\n            if (typeof this.seconds === 'undefined')\n                return '';\n            let time = this.seconds;\n            const mins = Math.floor(time / 60);\n            if (mins > 0)\n                time -= mins * 60;\n            const minsStr = padMinutes ? $.pad(mins) : String(mins);\n\n            const [secsStr, msStr] = time.toFixed(LRC_TS_DECIMALS).split('.');\n            return `${minsStr}:${$.pad(secsStr)}${this.#ignoreMs ? '' : `.${msStr}`}`;\n        }\n\n        #fromString(ts) {\n            if (!Duration.isValid(ts)) {\n                this.seconds = NaN;\n                return;\n            }\n            let parts = ts.split(':');\n            let dur = parseFloat(parts.pop());\n            if (parts.length)\n                dur += parseInt(parts.pop(), 10) * 60;\n            this.seconds = dur;\n        }\n\n        static isValid(ts) {\n            return /(?:\\d+:)?[0-5]?\\d:[0-5]\\d(?:\\.\\d{1,2})?/.test(ts);\n        }\n    }\n\n    class AudioPlaybackIndicator {\n        #$stateDiv;\n        #$position;\n        #$duration;\n        #$filename;\n        #$filetype;\n        #$progressFill;\n        #$progressLoaded;\n        #$entrySticks;\n        #$thumb;\n\n        constructor($stateDiv) {\n            this.#$stateDiv = $stateDiv;\n            this.#$position = this.#$stateDiv.find('.status-position');\n            this.#$duration = this.#$stateDiv.find('.status-duration');\n            this.#$filename = this.#$stateDiv.find('.status-filename');\n            this.#$filetype = this.#$stateDiv.find('.status-filetype');\n            this.$progressWrap = this.#$stateDiv.find('.progress-wrap');\n            this.#$progressFill = this.#$stateDiv.find('.progress-indicator .fill');\n            this.#$progressLoaded = this.#$stateDiv.find('.progress-indicator .loaded');\n            this.#$entrySticks = this.#$stateDiv.find('.progress-indicator .entry-sticks');\n            this.#$thumb = this.#$stateDiv.find('.thumb');\n            this.setFileName();\n            this.setProgress();\n            this.showThumb();\n        }\n\n        setFileName(name, type) {\n            this.#$filename.text(name ? name.replace(/\\.[^.]+$/, '') : '');\n            this.#$filetype.text(type ? type.split('/')[1].toUpperCase() : '');\n        }\n\n        getFileName() {\n            return this.#$filename.text().trim();\n        }\n\n        setProgress(position, duration) {\n            if (position === undefined && duration === undefined) {\n                this.#$position.html('&hellip;');\n                this.#$duration.html('&hellip;');\n                return;\n            }\n            const\n                pos = position || 0,\n                dur = duration || 0;\n            this.#$position.text(new Duration(pos));\n            this.#$duration.text(new Duration(dur));\n            this.updateSeek(pos, dur);\n        }\n\n        setLoaded(timeRanges, duration) {\n            this.#$progressLoaded.empty();\n            for (let i = 0; i < timeRanges.length; i++) {\n                const\n                    start = timeRanges.start(i),\n                    end = timeRanges.end(i);\n                this.#$progressLoaded.append($.mk('div').css({\n                    left: floatToPercent(start / duration),\n                    width: floatToPercent((end - start) / duration),\n                }));\n            }\n        }\n\n        /**\n         * @param {LRCString[]} entries\n         * @param {float}       duration\n         */\n        setEntries(entries, duration) {\n            this.#$entrySticks.empty();\n            $.each(entries, (_, el) => {\n                this.#$entrySticks.append($.mk('div').css({\n                    left: floatToPercent(el.ts.seconds / duration),\n                }));\n            });\n        }\n\n        updateSeek(pos, dur) {\n            const perc = floatToPercent(pos / dur);\n            this.#$progressFill.css('width', perc);\n            this.#$thumb.css('left', perc);\n        }\n\n        showThumb(isPlaying) {\n            this.#$stateDiv[isPlaying ? 'addClass' : 'removeClass']('playing');\n        }\n    }\n\n    class AudioPlayer {\n        #$player;\n        #$filein;\n        #$audiofilebtn;\n        #audio;\n        #mediatags;\n        #volumeStep;\n        #$volumedisp;\n        #updateIndTimer;\n        #stateInd;\n\n        constructor() {\n            this.#$player = $('#player');\n            this.#$filein = $.mk('input', 'audiofilein').attr({\n                type: 'file',\n                accept: 'audio/*',\n                tabindex: -1,\n                'class': 'fileinput',\n            }).appendTo($body);\n\n            this.#$audiofilebtn = $('#audiofilebtn');\n            this.$playbackbtn = $('#playbackbtn');\n            this.#audio = new Audio();\n            this.#audio.preload = 'auto';\n            this.$stopbtn = $('#stopbtn');\n            $(this.#audio).on('ended', () => {\n                this.stop();\n                this.updatePlaybackButtons();\n            }).on('loadeddata', () => {\n                this.#stateInd.setProgress();\n                this.updateInd();\n                this.#$audiofilebtn.enable();\n                this.updatePlaybackButtons();\n                this.#stateInd.showThumb(true);\n                this.updateEntrySticks();\n                this.setMetadataLength();\n            });\n\n            this.#mediatags = {};\n\n            this.#volumeStep = 0.05;\n            this.#$volumedisp = $('#volumedisp');\n            this.$volumedown = $('#volumedown');\n            this.$volumeup = $('#volumeup');\n            let sessionVol = AudioPlayer.getSessionVolume();\n            this.volume(sessionVol);\n            this.updateVolumeButtons(sessionVol);\n\n            this.#updateIndTimer = undefined;\n            this.#stateInd = new AudioPlaybackIndicator(this.#$player.find('.state'));\n            let resumeOnRelease;\n            this.#stateInd.$progressWrap.on('mousedown', e => {\n                if (e.which !== 1 || !this.hasFile())\n                    return;\n\n                e.preventDefault();\n\n                this.#stateInd.$progressWrap.addClass('moving');\n                resumeOnRelease = !this.#audio.paused;\n                this.pause();\n                this.updatePlaybackButtons();\n            });\n            $d.on('mouseup', e => {\n                if (e.which !== 1 || !this.#stateInd.$progressWrap.hasClass('moving') || !this.hasFile())\n                    return;\n\n                this.recalcThumbPos(e);\n                this.#stateInd.$progressWrap.removeClass('moving');\n                if (resumeOnRelease) {\n                    this.play();\n                    this.updatePlaybackButtons();\n                }\n            });\n            $d.on('mousemove', $.throttle(100, e => {\n                if (!this.#stateInd.$progressWrap.hasClass('moving') || !this.hasFile())\n                    return;\n\n                this.recalcThumbPos(e);\n            }));\n\n            this.$stopbtn.on('click', e => {\n                e.preventDefault();\n\n                if (!this.hasFile())\n                    return;\n\n                this.stop();\n                this.updatePlaybackButtons();\n                clearFocus();\n            });\n            this.$playbackbtn.on('click', e => {\n                e.preventDefault();\n\n                if (!this.hasFile())\n                    return;\n\n                if (this.#audio.paused)\n                    this.play();\n                else this.pause();\n                this.updatePlaybackButtons();\n                clearFocus();\n            });\n            this.$volumedown.on('click', (e, shiftKey, altKey) => {\n                e.preventDefault();\n\n                const newvol = this.volume() - (e.altKey || altKey ? 0.01 : this.#volumeStep * (e.shiftKey || shiftKey ? 2 : 1));\n                this.updateVolumeButtons(newvol);\n                this.volume(newvol);\n                clearFocus();\n            });\n            this.$volumeup.on('click', (e, shiftKey, altKey) => {\n                e.preventDefault();\n\n                const newvol = this.volume() + (e.altKey || altKey ? 0.01 : this.#volumeStep * (e.shiftKey || shiftKey ? 2 : 1));\n                this.updateVolumeButtons(newvol);\n                this.volume(newvol);\n                clearFocus();\n            });\n            this.#$audiofilebtn.on('click', e => {\n                e.preventDefault();\n\n                this.#$filein.trigger('click');\n                clearFocus();\n            });\n            this.#$filein.on('change', () => {\n                const val = this.#$filein.val();\n\n                if (!val)\n                    return;\n\n                this.clearFile();\n                this.#$audiofilebtn.disable();\n                this.setFile(this.#$filein[0].files[0], file => {\n                    this.#stateInd.setFileName(file.name, file.type);\n                });\n            });\n        }\n\n        /** @return {AudioPlayer} */\n        static getInstance() {\n            if (typeof pluginScope.player === 'undefined')\n                pluginScope.player = new AudioPlayer();\n            return pluginScope.player;\n        }\n\n        static getSessionVolume() {\n            if (!window.localStorage)\n                return 0.5;\n\n            let stored = localStorage.getItem('lrc-vol');\n            if (!stored || isNaN(stored)) {\n                stored = '0.5';\n                localStorage.setItem('lrc-vol', stored);\n            }\n\n            return parseFloat(stored);\n        }\n\n        volume(float) {\n            if (typeof float === 'undefined')\n                return this.#audio.volume;\n\n            float = $.rangeLimit($.roundTo(float, 2), false, 0, 1);\n            this.#$volumedisp.text($.pad(Math.round(float * 100), ' ', 3) + '%');\n            if (window.localStorage)\n                localStorage.setItem('lrc-vol', float);\n            this.#audio.volume = float;\n        }\n\n        updateVolumeButtons(newvol) {\n            this.$volumeup.attr('disabled', newvol >= 1);\n            this.$volumedown.attr('disabled', newvol <= 0);\n        }\n\n        updatePlaybackButtons() {\n            const fileMissing = !this.hasFile();\n            this.$playbackbtn.attr('disabled', fileMissing);\n            this.$stopbtn.attr('disabled', fileMissing);\n            TimingEditor.getInstance().disableModeButton(fileMissing);\n            this.$playbackbtn.children().removeClass('fa-play fa-pause');\n            if (!this.#audio.paused)\n                this.$playbackbtn.children().addClass('fa-pause');\n            else this.$playbackbtn.children().addClass('fa-play');\n        }\n\n        play() {\n            if (!this.#audio.paused)\n                return;\n\n            this.#audio.play();\n            this.#startUpdateIndTimer();\n            this.#stateInd.showThumb(true);\n        }\n\n        pause(skipIndUpd = false) {\n            this.#stopUpdateIndTimer();\n\n            if (this.#audio.paused)\n                return;\n            this.#audio.pause();\n            if (!skipIndUpd)\n                this.updateInd();\n        }\n\n        stop() {\n            this.pause(true);\n            this.#audio.currentTime = 0;\n            this.updateInd();\n        }\n\n        seek(seconds) {\n            if (!this.hasFile())\n                return;\n\n            this.#audio.currentTime = $.rangeLimit(this.#audio.currentTime + seconds, false, 0, this.#audio.duration);\n            this.updateInd();\n        }\n\n        /**\n         * @param {File} file\n         * @param {Function} callback\n         */\n        setFile(file, callback) {\n            this.stop();\n            this.#stateInd.showThumb(false);\n            this.updatePlaybackButtons();\n            if (!/^audio\\//.test(file.type)) {\n                $.Dialog.fail(Laravel.jsLocales.dialog_format_error, Laravel.jsLocales.dialog_format_notaudio);\n                return;\n            }\n            this.#audio.src = URL.createObjectURL(file);\n            new jsmediatags.Reader(file)\n                .setTagsToRead(['title', 'artist', 'album'])\n                .read({\n                    onSuccess: data => {\n                        if (typeof data === 'object') {\n                            this.setMediaTags(data.tags);\n                        }\n                    },\n                    onError: function (error) {\n                        console.log('Failed to read ID3 tags', error.type, error.info);\n                    }\n                });\n            callback(file);\n        }\n\n        hasFile() {\n            return this.#audio.readyState !== 0;\n        }\n\n        clearFile() {\n            this.stop();\n            if (this.#audio.src) {\n                URL.revokeObjectURL(this.#audio.src);\n            }\n            this.#audio.src = \"\";\n            this.clearMediaTags();\n        }\n\n        getFileName() {\n            const tags = this.#mediatags;\n            if (tags.title) {\n                if (tags.artist) {\n                    return `${tags.artist} - ${tags.title}`;\n                }\n                return tags.title;\n            }\n            return this.#stateInd.getFileName();\n        }\n\n        clearMediaTags() {\n            this.#mediatags = {};\n            TimingEditor.getInstance().setInitialMetadata({length: null});\n        }\n\n        setMediaTags(tags) {\n            if (typeof tags !== 'object')\n                throw new Error(`setMediaTags: tags must be an object, ${typeof tags} given.`);\n\n            this.#mediatags = tags;\n            TimingEditor.getInstance().setInitialMetadata(this.#mediatags);\n        }\n\n        getMediaTags() {\n            return this.#mediatags;\n        }\n\n        #startUpdateIndTimer() {\n            this.#stopUpdateIndTimer();\n            this.#updateIndTimer = setInterval(() => {\n                this.updateInd();\n            }, 85);\n        }\n\n        #stopUpdateIndTimer() {\n            if (typeof this.#updateIndTimer === 'undefined')\n                return;\n\n            clearInterval(this.#updateIndTimer);\n            this.#updateIndTimer = undefined;\n        }\n\n        updateInd() {\n            this.#stateInd.setProgress(this.#audio.currentTime, this.#audio.duration);\n            this.#stateInd.setLoaded(this.#audio.buffered, this.#audio.duration);\n            TimingEditor.getInstance().hlEntry(this.getPlaybackPosition());\n        }\n\n        updateEntrySticks() {\n            if (!this.hasFile())\n                return;\n\n            this.#stateInd.setEntries(TimingEditor.getInstance().getTimings(), this.#audio.duration);\n        }\n\n        setMetadataLength() {\n            TimingEditor.getInstance().setInitialMetadata({length: new Duration(this.#audio.duration, true)});\n        }\n\n        getPlaybackPosition() {\n            if (!this.hasFile())\n                return;\n\n            return new Duration(this.#audio.currentTime);\n        }\n\n        /** @param {string} ts */\n        setPlaybackPosition(ts) {\n            if (!this.hasFile() || !Duration.isValid(ts))\n                return;\n\n            this.#audio.currentTime = new Duration(ts).seconds;\n            this.updateInd();\n        }\n\n        recalcThumbPos(e) {\n            const\n                pwOffset = this.#stateInd.$progressWrap.offset(),\n                pwWidth = parseInt(this.#stateInd.$progressWrap.css('width'), 10),\n                relativeX = $.rangeLimit(e.clientX - pwOffset.left, false, 0, pwWidth - 0.00001);\n\n            this.#audio.currentTime = this.#audio.duration * (relativeX / pwWidth);\n            this.#stateInd.updateSeek(relativeX, pwWidth);\n            this.updateInd();\n        }\n    }\n\n    const LRC_META_TAGS = {\n        ar: 'artist',\n        ti: 'title',\n        al: 'album',\n        au: 'lyrics_author',\n        length: 'length',\n        by: 'file_author',\n        offset: 'offset',\n        re: 'created_with',\n        ve: 'version',\n    };\n    const LRC_TS_REGEX = /\\[([\\d:.]+)]/g;\n    const LRC_META_REGEX = new RegExp(`^\\\\\\[(${Object.keys(LRC_META_TAGS).join('|')}):([^\\\\\\]]+)]$`);\n\n    class LRCParser {\n        constructor(lrcfile) {\n            this.timings = [];\n            this.metadata = {};\n            const file = lrcfile.trim();\n            if (file.length === 0)\n                throw new Error(Laravel.jsLocales.dialog_parse_error_empty);\n            const lines = lrcfile.trim().split('\\n');\n            $.each(lines, (_, el) => {\n                const timestamps = el.match(LRC_TS_REGEX);\n                if (timestamps) {\n                    const text = el.replace(LRC_TS_REGEX, '');\n                    $.each(timestamps, (_, ts) => {\n                        this.timings.push(new LRCString(text, ts.substring(1, ts.length - 2)));\n                    });\n                } else {\n                    const trimmedEl = el.trim();\n                    const metadata = trimmedEl.match(LRC_META_REGEX);\n                    if (metadata) {\n                        this.metadata[metadata[1]] = metadata[2];\n                    }\n                }\n            });\n            this.timings.sort((a, b) => a.ts.seconds - b.ts.seconds);\n        }\n    }\n\n    class MetadataEditingForm {\n        #$form;\n\n        constructor(compiledMetadata) {\n            this.#$form = $.mk('form', 'metadata-editing-form');\n            $.each(LRC_META_TAGS, (short, long) => {\n                const id = `meta_input_${short}`;\n                const inputAttrs = {\n                    type: 'text',\n                    name: short,\n                    id,\n                    value: compiledMetadata[short],\n                    'class': 'form-control',\n                };\n                if (short === 'offset') {\n                    inputAttrs.type = 'number';\n                    inputAttrs.step = '0.001';\n                    inputAttrs.min = '0';\n                    inputAttrs.placeholder = '0';\n                    if (inputAttrs.value === inputAttrs.placeholder)\n                        inputAttrs.value = '';\n                }\n                this.#$form.append(\n                    $.mk('div').attr('class', 'mb-3').append(\n                        $.mk('label')\n                            .attr({\n                                'for': id,\n                            })\n                            .append(\n                                Laravel.jsLocales.metadata_field_placeholders[long],\n                                ` <code>${short}</code>`\n                            ),\n                        $.mk('input')\n                            .attr(inputAttrs)\n                    )\n                );\n            });\n            this.#$form.prepend(\n                $.mk('div').attr('class', ' alert alert-info text-center').append(\n                    $.mk('span').text(Laravel.jsLocales.dialog_edit_meta_reset_info),\n                    mk('br'),\n                    $.mk('button').attr({\n                        'class': 'btn btn-info',\n                        type: 'reset',\n                    }).append(\n                        '<i class=\"fa fa-undo\"/>',\n                        $.mk('span').text(Laravel.jsLocales.dialog_edit_meta_reset_btn)\n                    )\n                )\n            );\n        }\n\n        get() {\n            return this.#$form.clone();\n        }\n    }\n\n    /** @property {LRCString[]} timings */\n    class TimingEditor {\n        #mergedOutputStrategy;\n        #$timings;\n        #$lrcmodebtn;\n        #$lrcfilebtn;\n        #$filein;\n        #$lrcpastebtn;\n        #$lrcexportbtn;\n        #$lrcexportnometabtn;\n        #$lrcmergetogglebtn;\n        #$lrcclrbtn;\n        #$lrcmetadatabtn;\n        #$editor;\n        #$entryTemplate;\n        #lastLRCFilename;\n        #mode;\n\n        constructor() {\n            this.#$timings = $('#timings');\n            this.#$lrcmodebtn = $('#lrcmodebtn');\n            this.#$lrcfilebtn = $('#lrcfilebtn');\n            this.#$filein = $.mk('input', 'lrcfilein').attr({\n                type: 'file',\n                accept: '.lrc',\n                tabindex: -1,\n                'class': 'fileinput'\n            }).appendTo($body);\n            this.#$lrcpastebtn = $('#lrcpastebtn');\n            this.#$lrcexportbtn = $('#lrcexportbtn');\n            this.#$lrcexportnometabtn = $('#lrcexportnometabtn');\n            this.#$lrcmergetogglebtn = $('#lrcmergetogglebtn');\n            this.#$lrcclrbtn = $('#lrcclrbtn');\n            this.#$lrcmetadatabtn = $('#lrcmetadatabtn');\n            this.#$editor = this.#$timings.find('.editor');\n            this.#$entryTemplate = $('#editor-entry-template').children();\n            this.changeMode('edit');\n            this.timings = [];\n            this.initialMetadata = {\n                offset: '0',\n                re: `${window.location.href} - SeinopSys' LRC Editor`,\n                ve: window.Laravel.git.commit_id,\n            };\n            this.metadata = {};\n            this.#$editor.append(this.makeEntryDiv(new LRCString()));\n\n            this.#lastLRCFilename = undefined;\n            this.#mergedOutputStrategy = TimingEditor.getMergedOutputStrategyDefault();\n            this.#updateMergeStrategyButton();\n\n            this.#$lrcmodebtn.on('click', e => {\n                e.preventDefault();\n\n                if (this.#$lrcmodebtn.is('[disabled]'))\n                    return;\n\n                this.changeMode(null, e.altKey);\n                clearFocus();\n            });\n            this.#$lrcpastebtn.on('click', e => {\n                e.preventDefault();\n\n                const $form = $.mk('form', 'rawlyrics').append(\n                    `<div class=\"mb-3\">\n\t\t\t\t\t\t<textarea class=\"form-control\" rows=\"10\"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"text-info\"><span class=\"fa fa-info-circle me-2\"></span>${Laravel.jsLocales.dialog_pasteraw_info}</p>`\n                );\n                $.Dialog.request(Laravel.jsLocales.dialog_pasteraw_title, $form, Laravel.jsLocales.dialog_pasteraw_action, $form => {\n                    $form.on('submit', e => {\n                        e.preventDefault();\n\n                        $.Dialog.wait(false, 'Importing');\n                        const lines = $form.find('textarea').val().trim().split(/\\n+/g);\n                        lines.push(''); // Add an empty line to account for an outro\n                        this.timings = lines.map(el => new LRCString(el));\n                        AudioPlayer.getInstance().updateEntrySticks();\n                        this.regenEntries();\n                        this.#lastLRCFilename = undefined;\n\n                        $.Dialog.close();\n                    });\n                });\n            });\n            this.#$lrcexportbtn.on('click', e => {\n                e.preventDefault();\n\n                this.storeTimings();\n                this.exportLRCFile();\n            });\n            this.#$lrcexportnometabtn.on('click', e => {\n                e.preventDefault();\n\n                this.storeTimings();\n                this.exportLRCFile(false);\n            });\n            this.#$lrcmergetogglebtn.on('click', e => {\n                e.preventDefault();\n\n                this.#toggleMergeStrategy();\n            });\n            this.#$lrcclrbtn.on('click', e => {\n                e.preventDefault();\n\n                $.Dialog.confirm($(e.target).text(), undefined, sure => {\n                    if (!sure) return;\n\n                    this.#$editor.empty();\n                    this.#$editor.append(this.makeEntryDiv(new LRCString()));\n                    this.storeTimings();\n                    $.Dialog.close();\n                });\n            });\n            this.#$lrcmetadatabtn.on('click', e => {\n                e.preventDefault();\n\n                const $form = new MetadataEditingForm(this.getCurrentMetadata()).get();\n                $.Dialog.request(Laravel.jsLocales.dialog_edit_meta, $form, Laravel.jsLocales.save, () => {\n                    $form.on('submit', e => {\n                        e.preventDefault();\n\n                        const data = $form.mkData();\n                        $.each(LRC_META_TAGS, key => {\n                            this.metadata[key] = data[key].trim();\n                        });\n                        $.Dialog.close();\n                    });\n                    $form.on('reset', e => {\n                        e.preventDefault();\n\n                        this.metadata = {};\n                        const newMetadata = this.getCurrentMetadata();\n                        $.each(LRC_META_TAGS, key => {\n                            $form.find(`input[name=${key}]`).val(newMetadata[key]);\n                        });\n                    });\n                });\n            });\n            this.#$editor.on('mouseenter', () => {\n                this.#$editor.stop();\n            });\n            this.#$editor.on('keyup', '.timestamp', e => {\n                if (this.#mode !== 'edit')\n                    return;\n\n                const\n                    $ts = $(e.target),\n                    val = $ts.text().trim(),\n                    valInvalid = !Duration.isValid(val);\n                $ts[val.length && valInvalid ? 'addClass' : 'removeClass']('invalid');\n                $ts.siblings('.tools').children('.goto').attr('disabled', valInvalid);\n                AudioPlayer.getInstance().updateEntrySticks();\n            });\n            this.#$editor.on('click', '.addrow-up, .addrow-down', e => {\n                e.preventDefault();\n\n                const insertWhere = $(e.target).closest('button').attr('class').match(/addrow-(up|down)/)[1] === 'up' ? 'insertBefore' : 'insertAfter';\n                const $entry = this.makeEntryDiv(new LRCString())[insertWhere]($(e.target).closest('.time-entry'));\n                this.updateEntryActionButtons();\n                this.storeTimings();\n                $entry.addClass('new');\n                this.scrollHighlightedIntoView($entry, false);\n            });\n            this.#$editor.on('click', '.remrow', e => {\n                e.preventDefault();\n\n                const $entry = $(e.target).closest('.time-entry');\n                if ($entry.siblings().length === 0)\n                    return;\n\n                $entry.remove();\n                this.updateEntryActionButtons();\n                this.storeTimings();\n                this.hlEntry(AudioPlayer.getInstance().getPlaybackPosition());\n            });\n            this.#$editor.on('click', '.goto', e => {\n                e.preventDefault();\n\n                const $button = $(e.target).closest('.goto');\n                if ($button.is(':disabled'))\n                    return;\n\n                const $entry = $button.parents('.time-entry');\n                const ts = $entry.find('.timestamp').text();\n                AudioPlayer.getInstance().setPlaybackPosition(ts);\n\n                if (this.#mode === 'sync')\n                    this.passSyncHandle($entry);\n                clearFocus();\n            });\n            this.#$lrcfilebtn.on('click', e => {\n                e.preventDefault();\n\n                this.#$filein.trigger('click');\n                clearFocus();\n            });\n            this.#$filein.on('change', () => {\n                const val = this.#$filein.val();\n\n                if (!val) return;\n\n                this.#$lrcfilebtn.disable();\n                this.readLRCFile(this.#$filein[0].files[0], success => {\n                    if (success)\n                        this.regenEntries();\n                    else this.#$filein.val('');\n                    this.#$lrcfilebtn.enable();\n                });\n            });\n        }\n\n        /** @return {TimingEditor} */\n        static getInstance() {\n            if (typeof pluginScope.editor === 'undefined')\n                pluginScope.editor = new TimingEditor();\n            return pluginScope.editor;\n        }\n\n        disableModeButton(disable) {\n            this.#$lrcmodebtn.attr('disabled', disable);\n        }\n\n        changeMode(mode = null, preservePosition = false) {\n            if (mode === null)\n                mode = this.#mode === 'sync' ? 'edit' : 'sync';\n            else if ($.inArray(mode, ['sync', 'edit']) === -1)\n                throw new Error('Invalid mode: ' + mode);\n            if (this.#mode === mode)\n                return;\n\n            const $children = this.#$lrcmodebtn.children();\n            const modeIcon = ({edit: 'edit', sync: 'time'})[mode];\n            const otherMode = mode === 'sync' ? 'edit' : 'sync';\n            const otherIcon = mode === 'sync' ? 'edit' : 'clock';\n            $children.first().removeClass(`fa-${modeIcon}`).addClass(`fa-${otherIcon}`).next().text(this.#$lrcmodebtn.attr(`data-${otherMode}mode`));\n            this.#$editor.removeClass(`mode-${otherMode}`).addClass(`mode-${mode}`);\n            this.#mode = mode;\n\n            switch (this.#mode) {\n                case \"edit\":\n                    this.revokeSyncHandle();\n                    this.#$editor.find('.text, .timestamp').attr('contenteditable', true);\n                    this.#$editor.find('.sync-handle').removeClass('sync-handle');\n                    break;\n                case \"sync\":\n                    this.#$editor.find('.text, .timestamp').removeAttr('contenteditable');\n                    const $handle = this.getSyncHandle(preservePosition);\n                    this.scrollHighlightedIntoView($handle, false);\n                    break;\n            }\n        }\n\n        getTimings() {\n            return this.timings;\n        }\n\n        setTimings(timings) {\n            this.timings = timings;\n            this.regenEntries();\n            AudioPlayer.getInstance().updateEntrySticks();\n        }\n\n        setInitialMetadata(metadata) {\n            $.each(['ar', 'ti', 'al', 'length'], (_, el) => {\n                const long = LRC_META_TAGS[el];\n                if (metadata[long])\n                    this.initialMetadata[el] = metadata[long];\n                else if (metadata[long] === null)\n                    delete this.initialMetadata[el];\n            });\n        }\n\n        setMetadata(metadata) {\n            this.metadata = metadata;\n        }\n\n        getCurrentMetadata() {\n            return $.extend({}, this.initialMetadata, this.metadata);\n        }\n\n        storeTimings() {\n            const $children = this.#$editor.children();\n            let timings = [];\n            $children.each(function () {\n                const\n                    $entry = $(this),\n                    ts = $entry.children('.timestamp').text().trim();\n                if (!ts.length || !Duration.isValid(ts))\n                    return;\n\n                const text = $entry.children('.text').text().trim().split('\\n');\n\n                $.each(text, (_, el) => {\n                    timings.push(new LRCString(\n                        el,\n                        ts,\n                        $entry\n                    ));\n                });\n            });\n            this.timings = timings;\n            AudioPlayer.getInstance().updateEntrySticks();\n        }\n\n        makeEntryDiv(lrcstring) {\n            const $clone = this.#$entryTemplate.clone();\n            $clone.children().first().text(lrcstring.ts.toString()).trigger('keyup').next().text(lrcstring.str);\n            return $clone;\n        }\n\n        regenEntries() {\n            this.#$editor.empty();\n            $.each(this.timings, (i, el) => {\n                this.timings[i].$domNode = this.makeEntryDiv(el);\n                this.#$editor.append(this.timings[i].$domNode);\n            });\n            this.passSyncHandle(this.#$editor.children().first());\n            this.updateEntryActionButtons();\n        }\n\n        updateEntryActionButtons() {\n            const $entries = this.#$editor.children();\n            $entries.find('.remrow').attr('disabled', $entries.length === 1);\n            $entries.find('.goto').disable().filter(function () {\n                return Duration.isValid($(this).parent().siblings().first().text().trim());\n            }).enable();\n        }\n\n        readLRCFile(file, callback) {\n            const reader = new FileReader();\n            reader.onload = () => {\n                try {\n                    const parsed = new LRCParser(reader.result);\n                    this.setTimings(parsed.timings);\n                    this.setMetadata(parsed.metadata);\n                } catch (e) {\n                    $.Dialog.fail(Laravel.jsLocales.dialog_parse_error, e.message);\n                    callback(false);\n                    return;\n                }\n                this.#lastLRCFilename = file.name.replace(/\\.lrc$/, '');\n                callback(true);\n            };\n            reader.readAsText(file);\n        }\n\n        static giveSyncHandleTo($el) {\n            $el.addClass('sync-handle');\n            $el.find('.timestamp').focus();\n            return $el;\n        }\n\n        getSyncHandle(nowplayingAsHandle = false) {\n            if (this.#mode === 'edit')\n                return;\n\n            const $children = this.#$editor.children();\n            if (!$children.length)\n                return;\n\n            let $handle = this.#$editor.children('.sync-handle');\n            const $nowplaying = this.#$editor.children('.nowplaying').removeClass('nowplaying');\n            if (nowplayingAsHandle && !$handle.length) {\n                $handle = $nowplaying;\n                if ($handle.length)\n                    $handle.addClass('sync-handle');\n            }\n            if (!$handle.length)\n                $handle = TimingEditor.giveSyncHandleTo(this.#$editor.children().first());\n            return $handle;\n        }\n\n        revokeSyncHandle() {\n            const $current = this.getSyncHandle();\n            if (typeof $current !== 'undefined')\n                $current.removeClass('sync-handle nowplaying').removeAttr('title');\n\n            return $current;\n        }\n\n        passSyncHandle($next = null, resetOnEnd = true) {\n            if (this.#mode === 'edit')\n                return;\n\n            const $current = this.revokeSyncHandle();\n\n            if ($next === null)\n                $next = $current.next();\n\n            if (!$next.length) {\n                if (resetOnEnd) {\n                    this.changeMode('edit');\n                    return;\n                }\n                $next = $current;\n            }\n\n            TimingEditor.giveSyncHandleTo($next);\n            this.scrollHighlightedIntoView($next, false);\n        }\n\n        syncEntry(writeTs = true, resetOnEnd = true) {\n            if (this.#mode === 'edit')\n                return;\n\n            const\n                $handle = this.getSyncHandle(),\n                pos = AudioPlayer.getInstance().getPlaybackPosition();\n\n            if (writeTs) {\n                const $prevTs = $handle.prev().find('.timestamp');\n                if ($prevTs.text().trim() === pos) {\n                    $prevTs.removeClass('flash').addClass('flash');\n                    return;\n                }\n\n                $handle.find('.timestamp').text(pos).trigger('keyup');\n            }\n            this.passSyncHandle(null, resetOnEnd);\n            this.storeTimings();\n            this.updateEntryActionButtons();\n            AudioPlayer.getInstance().updateEntrySticks();\n        }\n\n        syncBreakEntry() {\n            if (this.#mode === 'edit')\n                return;\n\n            const\n                $handle = this.getSyncHandle(),\n                pos = AudioPlayer.getInstance().getPlaybackPosition();\n\n            this.makeEntryDiv(new LRCString('', pos)).insertBefore($handle).find('[contenteditable]').removeAttr('contenteditable');\n            this.scrollHighlightedIntoView($handle, false);\n            this.updateEntryActionButtons();\n            this.storeTimings();\n            AudioPlayer.getInstance().updateEntrySticks();\n        }\n\n        undoSync() {\n            if (this.#mode === 'edit')\n                return;\n\n            const $handle = this.getSyncHandle();\n            if ($handle.index() === 0)\n                return;\n            this.passSyncHandle($handle.prev());\n            this.storeTimings();\n            this.updateEntryActionButtons();\n            AudioPlayer.getInstance().updateEntrySticks();\n        }\n\n        emptySync() {\n            if (this.#mode === 'edit')\n                return;\n\n            const $handle = this.getSyncHandle();\n            $handle.find('.timestamp').empty().trigger('keyup');\n            this.passSyncHandle();\n            this.storeTimings();\n            AudioPlayer.getInstance().updateEntrySticks();\n        }\n\n        /** @vparam {Duration} position */\n        hlEntry(position) {\n            if (this.#mode === 'sync' || typeof position === 'undefined')\n                return;\n\n            const usableTimings = this.getTimings();\n            const i = binarySearch(usableTimings, n => n.ts.seconds - position.seconds);\n            if (i < 0) {\n                $('.nowplaying').removeClass('nowplaying');\n                return;\n            }\n\n            const $hl = usableTimings[i].$domNode;\n            if ($hl.hasClass('nowplaying'))\n                return;\n\n            this.scrollHighlightedIntoView($hl);\n        }\n\n        scrollHighlightedIntoView($hl, highlight = true) {\n            if (highlight)\n                $hl.addClass('nowplaying').siblings().removeClass('nowplaying');\n\n            if (this.#$editor.is(':hover'))\n                return;\n\n            const\n                hlpos = $hl.position(),\n                edpos = this.#$editor.position(),\n                scrl = this.#$editor.scrollTop();\n\n            const newscrl = scrl + (hlpos.top - edpos.top) - (this.#$editor.height() / 2) + ($hl.height() / 2);\n            this.#$editor.stop().animate({scrollTop: newscrl}, 400);\n        }\n\n        /**\n         * Grab last value from local storage and use if available\n         * @returns {boolean}\n         */\n        static getMergedOutputStrategyDefault() {\n            if (!window.localStorage)\n                return true;\n\n            let stored = localStorage.getItem('lrc-merge');\n            if (!stored || stored !== 'false') {\n                stored = 'true';\n                localStorage.setItem('lrc-merge', stored);\n            }\n\n            return stored === 'true';\n        }\n\n        #toggleMergeStrategy() {\n            this.#mergedOutputStrategy = !this.#mergedOutputStrategy;\n            if (window.localStorage)\n                localStorage.setItem('lrc-merge', this.#mergedOutputStrategy ? 'true' : 'false');\n            this.#updateMergeStrategyButton();\n        }\n\n        #updateMergeStrategyButton() {\n            const $status = this.#$lrcmergetogglebtn.find('.status');\n            if (this.#mergedOutputStrategy) {\n                $status.addClass('text-success').removeClass('text-danger');\n            } else {\n                $status.removeClass('text-success').addClass('text-danger');\n            }\n            $status.text($status.attr(`data-${this.#mergedOutputStrategy ? 'true' : 'false'}`));\n        }\n\n        exportLRCFile(includeMetadata = true) {\n            let outputArr = [];\n            if (includeMetadata) {\n                const metadata = this.getCurrentMetadata();\n                $.each(metadata, (k, v) => {\n                    if (v !== '') {\n                        switch (k) {\n                            case 'offset':\n                                if (v === '0')\n                                    return;\n                                break;\n                            case 'length':\n                                v = ` ${v}`;\n                                break;\n                        }\n                        outputArr.push(`[${k}:${v}]`);\n                    }\n                });\n            }\n            if (this.#mergedOutputStrategy) {\n                const strings = {};\n                $.each(this.timings, (i, el) => {\n                    if (typeof strings[el.str] === 'undefined')\n                        strings[el.str] = [];\n\n                    strings[el.str].push(el.ts.toString(true));\n                });\n                $.each(strings, (str, tsArr) => {\n                    outputArr.push(`[${tsArr.join('][')}]${str}`);\n                });\n            } else {\n                outputArr = [\n                    ...outputArr,\n                    ...this.timings.map(el => `[${el.ts.toString(true)}]${el.str}`),\n                ];\n            }\n            const output = outputArr.join('\\n') + '\\n';\n            const basename = this.#lastLRCFilename || AudioPlayer.getInstance().getFileName() || 'Lyrics';\n            const filename = `${basename}.lrc`;\n\n            const blob = new Blob([output], {type: \"text/plain;charset=utf-8\"});\n            saveAs(blob, filename);\n        }\n    }\n\n    // Create instances\n    AudioPlayer.getInstance();\n    TimingEditor.getInstance();\n\n    $d.on('keydown', $.throttle(200, function (e) {\n        const tagname = e.target.tagName.toLowerCase();\n        if ((tagname === 'input' && e.target.type !== 'file') || tagname === 'textarea' || e.target.getAttribute('contenteditable') !== null)\n            return;\n\n        switch (e.keyCode) {\n            case Key.LeftArrow:\n                pluginScope.player.seek(-2.5 * (e.shiftKey ? 2 : 1));\n                break;\n            case Key.RightArrow:\n                pluginScope.player.seek(2.5 * (e.shiftKey ? 2 : 1));\n                break;\n            case Key.PageUp:\n                pluginScope.player.$volumeup.trigger('click', [e.shiftKey, e.altKey]);\n                break;\n            case Key.PageDown:\n                pluginScope.player.$volumedown.trigger('click', [e.shiftKey, e.altKey]);\n                break;\n            case Key.Space:\n                pluginScope.player.$playbackbtn.trigger('click');\n                break;\n            case Key.Period:\n                pluginScope.player.$stopbtn.trigger('click');\n                break;\n            case Key.Enter:\n                if (e.ctrlKey && !e.altKey) {\n                    e.preventDefault();\n                    pluginScope.editor.syncBreakEntry(e);\n                }\n                else {\n                    e.preventDefault();\n                    pluginScope.editor.syncEntry();\n                }\n                break;\n            case Key.UpArrow:\n                pluginScope.editor.undoSync();\n                break;\n            case Key.DownArrow:\n                pluginScope.editor.syncEntry(false, false);\n                break;\n            case Key.Delete:\n                pluginScope.editor.emptySync();\n                break;\n            default:\n                return;\n        }\n\n        e.preventDefault();\n    }));\n\n    // http://stackoverflow.com/a/17545260/1344955\n    $d.on('paste', '[contenteditable]', function (e) {\n        let text = '';\n        let $this = $(this);\n\n        if (e.clipboardData)\n            text = e.clipboardData.getData('text/plain');\n        else if (window.clipboardData)\n            text = window.clipboardData.getData('Text');\n        else if (e.originalEvent.clipboardData)\n            text = $.mk('div').text(e.originalEvent.clipboardData.getData('text'));\n\n        if (document.queryCommandSupported('insertText')) {\n            document.execCommand('insertHTML', false, $(text).html());\n            return false;\n        } else {\n            $this.find('*').each(function () {\n                $(this).addClass('within');\n            });\n\n            setTimeout(function () {\n                $this.find('*').each(function () {\n                    $(this).not('.within').contents().unwrap();\n                });\n            }, 1);\n        }\n    }).on('keyup', '[contenteditable]', function () {\n        const $this = $(this);\n        if ($this.text().trim().length === 0)\n            $this.empty();\n    });\n\n    const $ist = $('#info-shortcuts-template');\n    if (typeof navigator.userAgent === 'string' && /(macos|iphone|os ?x|ip[ao]d)/i.test(navigator.userAgent)) {\n        $ist.find('kbd:contains(Shift)').html(`&#x2325;`);\n        $ist.find('kbd:contains(Ctrl)').html(`&#x2318;`);\n    }\n    $('#shortcut-info').on('click', function (e) {\n        e.preventDefault();\n\n        const title = $(this).attr('title');\n        $.Dialog.info(title, $ist.clone().children());\n    });\n\n    window.Plugin = pluginScope;\n})(jQuery);\n"]}