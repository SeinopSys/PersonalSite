{"version":3,"sources":["dialog.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","_classPrivateMethodGet","receiver","privateSet","fn","has","$","undefined","colors","fail","success","wait","request","confirm","info","noticeClasses","yiq","danger","primary","warning","defaultTitles","window","Laravel","dialog","defaultContent","$modalElement","mk","attr","class","tabindex","role","aria-labelledby","id","html","_display","WeakSet","Dialog","this","add","$dialogOverlay","$dialogContent","$dialogHeader","$dialogBox","$dialogButtons","_open","_closeButton","close","_$focusedElement","_modalInstance","title","content","force_new","_display2","call","buttons","callback","btnobj","isArray","each","_","$el","trigger","additional_info","capitalize","confirmBtn","formid","classScope","jQuery","match","submit","form","cancel","action","btnTextArray","handlerFunc","b","yes","no","$focus","last","focus","$inputs","find","filter","$actions","children","first","type","disable","addClass","removeClass","enable","_this","isOpen","callCallback","hide","one","remove","_restoreFocus","regexp","$notice","test","hasClass","_controlInputs","_this2","$requestContentDiv","params","color","append","Boolean","$contentAdd","appendingToRequest","includes","_storeFocus","clone","appendTo","$body","$errorNotice","show","empty","parent","concat","name","$button","on","prepend","text","e","Key","Enter","Space","keyCode","preventDefault","Tab","LeftArrow","RightArrow","$dBc","$focused","isKey","shiftKey","prev","next","dispose","bootstrap","Modal","backdrop","keyboard","_setFocus","Time","update","$lastdiv","stop","animate","scrollTop","position","top","parseFloat","css","idx","index","$parent","is","eq"],"mappings":"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","file":"../js/dialog.js","sourcesContent":["/* globals $body,Key,$w,Time */\n(function ($, undefined) {\n    'use strict';\n    let colors = {\n            fail: 'danger',\n            success: 'success',\n            wait: 'info',\n            request: 'primary',\n            confirm: 'warning',\n            info: 'info'\n        },\n        noticeClasses = {\n            fail: 'danger',\n            success: 'success',\n            wait: 'info',\n            request: 'primary',\n            confirm: 'warning',\n            info: 'info',\n        },\n        yiq = {\n            danger: 'white',\n            success: 'white',\n            info: 'white',\n            primary: 'white',\n            warning: 'dark',\n        },\n        defaultTitles = window.Laravel.dialog.defaultTitles,\n        defaultContent = window.Laravel.dialog.defaultContent;\n\n    let $modalElement = $.mk('div').attr({\n        'class': 'modal fade',\n        tabindex: -1,\n        role: 'dialog',\n        'aria-labelledby': 'dialogHeader',\n        id: 'dialogOverlay',\n    }).html(\n        `<div class=\"modal-dialog\" role=\"document\" id=\"dialogBox\">\n\t\t\t<div class=\"modal-content\">\n\t\t\t\t<div class=\"modal-header\">\n\t\t\t\t\t<h4 class=\"modal-title\" id=\"dialogHeader\"></h4>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal-body\" id=\"dialogContent\"></div>\n\t\t\t\t<div class=\"modal-footer\" id=\"dialogButtons\"></div>\n\t\t\t</div>\n\t\t</div>`\n    );\n\n    class Dialog {\n        constructor() {\n            this.$dialogOverlay = $('#dialogOverlay');\n            this.$dialogContent = $('#dialogContent');\n            this.$dialogHeader = $('#dialogHeader');\n            this.$dialogBox = $('#dialogBox');\n            this.$dialogButtons = $('#dialogButtons');\n            this._open = this.$dialogContent.length ? {} : undefined;\n            this._closeButton = {\n                [window.Laravel.dialog.close]: function () {\n                    $.Dialog.close()\n                }\n            };\n            this._$focusedElement = undefined;\n            this._modalInstance = undefined;\n        }\n\n        isOpen() {\n            return typeof this._open === 'object'\n        }\n\n        #display(type, title, content, buttons, callback) {\n            if (typeof type !== 'string' || typeof colors[type] === 'undefined')\n                throw new TypeError('Invalid dialog type: ' + typeof type);\n\n            if (typeof buttons === 'function' && typeof callback !== 'function') {\n                callback = buttons;\n                buttons = undefined;\n            }\n            let force_new = false;\n            if (typeof callback === 'boolean') {\n                force_new = callback;\n                callback = undefined;\n            } else if (typeof buttons === 'boolean' && typeof callback === 'undefined') {\n                force_new = buttons;\n                buttons = undefined;\n            }\n\n            if (typeof title === 'undefined')\n                title = defaultTitles[type];\n            else if (title === false)\n                title = undefined;\n            if (!content)\n                content = defaultContent[type];\n            let params = {\n                type: type,\n                title: title,\n                content: content || defaultContent[type],\n                buttons: buttons,\n                color: colors[type]\n            };\n\n            let append = Boolean(this._open),\n                $contentAdd = $.mk('div').append(params.content),\n                appendingToRequest = append && this._open.type === 'request' && ['fail', 'wait'].includes(params.type) && !force_new,\n                $requestContentDiv;\n\n            if (!append) {\n                this._storeFocus();\n                $modalElement.clone().appendTo($body);\n            }\n            if (appendingToRequest) {\n                $requestContentDiv = this.$dialogContent.children(':not(#dialogButtons)').last();\n                let $errorNotice = $requestContentDiv.children('.notice:last-child');\n                if (!$errorNotice.length) {\n                    $errorNotice = $.mk('div').append($.mk('p').attr('class','mb-0'));\n                    $requestContentDiv.append($errorNotice);\n                } else $errorNotice.show();\n                $errorNotice\n                    .attr('class', 'alert alert-' + noticeClasses[params.type])\n                    .children('p').html(params.content).show();\n                this._controlInputs(params.type === 'wait');\n            } else {\n                this._open = params;\n                this.$dialogOverlay = $('#dialogOverlay');\n                this.$dialogContent = $('#dialogContent');\n                this.$dialogHeader = $('#dialogHeader');\n                if (typeof params.title === 'string')\n                    this.$dialogHeader.html(params.title);\n                this.$dialogBox = $('#dialogBox');\n                this.$dialogButtons = $('#dialogButtons').empty();\n                this._controlInputs(true);\n                this.$dialogContent.append($contentAdd);\n\n                this.$dialogButtons[params.buttons ? 'show' : 'hide']();\n            }\n\n            if (!appendingToRequest)\n                this.$dialogHeader.parent().attr('class', 'modal-header' + (params.color ? ` bg-${params.color} text-${yiq[params.color]}` : ''));\n\n            if (!appendingToRequest && params.buttons) $.each(params.buttons, (name, obj) => {\n                let $button = $.mk('button').attr({\n                    'type': 'button',\n                    'class': 'btn btn-' + params.color\n                });\n                if (typeof obj === 'function')\n                    obj = {action: obj};\n                else if (obj.form) {\n                    $requestContentDiv = $(`#${obj.form}`);\n                    if ($requestContentDiv.length === 1) {\n                        $button.on('click', function () {\n                            $requestContentDiv.find('input[type=submit]').first().trigger('click');\n                        });\n                        $requestContentDiv.prepend($.mk('input').attr('type', 'submit').hide());\n                    }\n                }\n                $button.text(name).on('keydown', e => {\n                    if ([Key.Enter, Key.Space].includes(e.keyCode)) {\n                        e.preventDefault();\n\n                        $button.trigger('click');\n                    } else if ([Key.Tab, Key.LeftArrow, Key.RightArrow].includes(e.keyCode)) {\n                        e.preventDefault();\n\n                        let $dBc = this.$dialogButtons.children(),\n                            $focused = $dBc.filter(':focus'),\n                            $inputs = this.$dialogContent.find(':input');\n\n                        if ($.isKey(Key.LeftArrow, e))\n                            e.shiftKey = true;\n\n                        if ($focused.length) {\n                            if (!e.shiftKey) {\n                                if ($focused.next().length) $focused.next().focus();\n                                else if ($.isKey(Key.Tab, e)) $inputs.add($dBc).filter(':visible').first().focus();\n                            } else {\n                                if ($focused.prev().length) $focused.prev().focus();\n                                else if ($.isKey(Key.Tab, e)) ($inputs.length > 0 ? $inputs : $dBc).filter(':visible').last().focus();\n                            }\n                        } else $inputs.add($dBc)[!e.shiftKey ? 'first' : 'last']().focus();\n                    }\n                }).on('click', e => {\n                    e.preventDefault();\n\n                    $.callCallback(obj.action, [e]);\n                });\n                this.$dialogButtons.append($button);\n            });\n            if (!append) {\n                if (this._modalInstance)\n                    this._modalInstance.dispose();\n                this._modalInstance = new bootstrap.Modal(this.$dialogOverlay, {\n                    backdrop: 'static',\n                    keyboard: false,\n                });\n                this._modalInstance.show();\n                this.$dialogOverlay.one('shown.bs.modal', () => {\n                    this._setFocus();\n                    Time.update();\n\n                    $.callCallback(callback, [$requestContentDiv]);\n                    if (append) {\n                        let $lastdiv = this.$dialogContent.children().last();\n                        if (appendingToRequest) {\n                            const $notice = $lastdiv.children('.notice').last();\n                            if ($notice.length)\n                                $lastdiv = $notice;\n                        }\n                        this.$dialogOverlay.stop().animate(\n                            {\n                                scrollTop: '+=' +\n                                    ($lastdiv.position().top + parseFloat($lastdiv.css('margin-top'), 10) + parseFloat($lastdiv.css('border-top-width'), 10))\n                            },\n                            'fast'\n                        );\n                    }\n                });\n            }\n        }\n\n        fail(title, content, force_new) {\n            this.#display('fail', title, content, this._closeButton, force_new === true);\n        }\n\n        success(title, content, buttons, callback) {\n            let btnobj;\n            if (buttons === true)\n                btnobj = this._closeButton;\n            else if ($.isArray(buttons)) {\n                btnobj = {};\n                $.each(buttons, function (_, $el) {\n                    (function ($el) {\n                        btnobj[$el.html()] = function () {\n                            $el.trigger('click');\n                        };\n                    })($el);\n                });\n            }\n            this.#display('success', title, content, btnobj, callback);\n        }\n\n        wait(title, additional_info, force_new) {\n            if (typeof additional_info === 'boolean' && typeof force_new === 'undefined') {\n                force_new = additional_info;\n                additional_info = undefined;\n            }\n            if (typeof additional_info !== 'string')\n                additional_info = defaultContent.wait;\n            this.#display('wait', title, $.capitalize(additional_info) + '&hellip;', force_new === true);\n        }\n\n        request(title, content, confirmBtn, callback) {\n            if (typeof confirmBtn === 'function' && typeof callback === 'undefined') {\n                callback = confirmBtn;\n                confirmBtn = undefined;\n            }\n            let buttons = {},\n                formid,\n                classScope = this;\n            if (content instanceof jQuery)\n                formid = content.attr('id');\n            else if (typeof content === 'string') {\n                let match = content.match(/<form\\sid=[\"']([^\"']+)[\"']/);\n                if (match)\n                    formid = match[1];\n            }\n            if (confirmBtn !== false) {\n                if (formid)\n                    buttons[confirmBtn || window.Laravel.dialog.submit] = {\n                        submit: true,\n                        form: formid,\n                    };\n                buttons[window.Laravel.dialog.cancel] = function () {\n                    classScope.close()\n                };\n            } else buttons[window.Laravel.dialog.close] = {\n                action: function () {\n                    classScope.close()\n                },\n                form: formid,\n            };\n\n            this.#display('request', title, content, buttons, callback);\n        }\n\n        confirm(title, content, btnTextArray, handlerFunc) {\n            if (typeof btnTextArray === 'function' && typeof handlerFunc === 'undefined')\n                handlerFunc = btnTextArray;\n\n            let classScope = this;\n            if (typeof handlerFunc !== 'function')\n                handlerFunc = function (b) {\n                    if (b) classScope.close()\n                };\n\n            if (!$.isArray(btnTextArray))\n                btnTextArray = [window.Laravel.dialog.yes, window.Laravel.dialog.no];\n            let buttons = {};\n            buttons[btnTextArray[0]] = function () {\n                handlerFunc(true)\n            };\n            buttons[btnTextArray[1]] = function () {\n                handlerFunc(false);\n                classScope.close()\n            };\n            this.#display('confirm', title, content, buttons);\n        }\n\n        info(title, content, callback) {\n            this.#display('info', title, content, this._closeButton, callback);\n        }\n\n        setFocusedElement($el) {\n            if ($el instanceof jQuery)\n                this._$focusedElement = $el;\n        }\n\n        _storeFocus() {\n            if (typeof this._$focusedElement !== 'undefined' && this._$focusedElement instanceof jQuery)\n                return;\n            let $focus = $(':focus');\n            this._$focusedElement = $focus.length > 0 ? $focus.last() : undefined;\n        }\n\n        _restoreFocus() {\n            if (typeof this._$focusedElement !== 'undefined' && this._$focusedElement instanceof jQuery) {\n                this._$focusedElement.focus();\n                this._$focusedElement = undefined;\n            }\n        }\n\n        _setFocus() {\n            let $inputs = this.$dialogContent.find('input,select,textarea').filter(':visible'),\n                $actions = this.$dialogButtons.children();\n            if ($inputs.length > 0)\n                $inputs.first().focus();\n            else if ($actions.length > 0 && this._open.type !== 'info')\n                $actions.first().focus();\n        }\n\n        _controlInputs(disable) {\n            let $inputs = this.$dialogContent\n                .children(':not(#dialogButtons)')\n                .last()\n                .add(this.$dialogButtons)\n                .find('input, button, select, textarea');\n\n            if (disable)\n                $inputs.filter(':not(:disabled)').addClass('temp-disable').disable();\n            else $inputs.filter('.temp-disable').removeClass('temp-disable').enable();\n        }\n\n        close(callback) {\n            if (!this.isOpen() || !this._modalInstance)\n                return $.callCallback(callback, false);\n\n            this._modalInstance.hide();\n            this.$dialogOverlay.one('hidden.bs.modal', () => {\n                this.$dialogOverlay.remove();\n                this._open = undefined;\n                this._restoreFocus();\n                $.callCallback(callback);\n            });\n        }\n\n        clearNotice(regexp) {\n            let $notice = this.$dialogContent.children(':not(#dialogButtons)').children('.notice:last-child');\n            if (!$notice.length)\n                return false;\n\n            if (typeof regexp === 'undefined' || regexp.test($notice.html())) {\n                $notice.hide();\n                if ($notice.hasClass('info'))\n                    this._controlInputs(false);\n                return true;\n            }\n            return false;\n        }\n    }\n\n    $.Dialog = new Dialog();\n\n    $body.on('keydown', function (e) {\n        if (!$.Dialog.isOpen() || e.keyCode !== Key.Tab)\n            return true;\n\n        let $inputs = $.Dialog.$dialogContent.find(':input'),\n            $focused = $inputs.filter(e.target),\n            idx = $inputs.index($focused);\n\n        if ($focused.length === 0) {\n            e.preventDefault();\n            $inputs.first().focus();\n        } else if (e.shiftKey) {\n            if (idx === 0) {\n                e.preventDefault();\n                $.Dialog.$dialogButtons.find(':last').focus();\n            } else {\n                let $parent = $focused.parent();\n                if (!$parent.is($.Dialog.$dialogButtons))\n                    return true;\n                if ($parent.children().first().is($focused)) {\n                    e.preventDefault();\n                    $inputs.eq($inputs.index($focused) - 1).focus();\n                }\n            }\n        }\n    });\n})(jQuery);\n"]}