{"version":3,"sources":["imagecalc.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","$","$tabs","$w","on","hash","test","addClass","$linkedTab","$tabPills","find","removeClass","length","filter","this","show","$a","first","attr","hashchange","window","location","triggerHandler","e","target","each","_","el","trigger","isValid","$target","tagName","is","val","pattern","RegExp","ns","$width","concat","$height","$targets","$value","$output","$form","preventDefault","result","w","h","p","div","d","scale","width","height","isNaN","Math","round","Error","scaleResize","parseInt","parseFloat","condensedScale","String","replace","text","cycleNames","cycleValues","$nextTarget","$currentTarget","nextTargetName","floor","random","prop","_ref","divisor","greatestCommonDivisor","a","b","reduceRatio","output","join","empty","append","html","demoData","data","jQuery"],"mappings":"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","file":"../js/imagecalc.js","sourcesContent":["(function ($) {\n    'use strict';\n\n    let $tabs = $('#main-tabs'),\n        hashchange = function (hash) {\n            if (hash && /^#[a-z-]+$/.test(hash)) {\n\n                $('.tab-panel').addClass('d-none');\n                const $linkedTab = $(hash);\n                const $tabPills = $tabs.find('a').removeClass('active');\n                if ($linkedTab.length) {\n                    $linkedTab.removeClass('d-none');\n                    $tabPills.filter(function () {\n                        return this.hash === hash;\n                    }).addClass('active');\n                } else $('.tab-panel.not-found').removeClass('d-none').show();\n            } else {\n                let $a = $tabs.find('a').first().addClass('active');\n                $($a.attr('href')).removeClass('d-none');\n            }\n        };\n    $w.on('hashchange', function () {\n        hashchange(window.location.hash);\n    }).triggerHandler('hashchange');\n\n    $('.tab-panel form').on('clear', e => {\n        $(e.target).find('.form-control[required], .form-control[pattern]').each((_, el) => {\n            $(el).trigger('change');\n        });\n    });\n\n    $('.form-control[required], .form-control[pattern]').on('keydown keyup change', e => {\n        const $target = $(e.target);\n        let isValid;\n        if (e.target.tagName === 'INPUT')\n            isValid = $target.is(':valid');\n        else {\n            if (typeof $target.attr('required') !== 'undefined')\n                isValid = $target.val().length > 0;\n            else isValid = true;\n\n            if (isValid) {\n                const pattern = $target.attr('pattern');\n                if (typeof pattern !== 'undefined') {\n                    isValid = new RegExp(pattern).test($target.val());\n                }\n            }\n        }\n        $target[isValid ? 'removeClass' : 'addClass']('is-invalid');\n    }).trigger('change');\n\n    function scaleResize(w, h, p) {\n        let div, d = {\n            scale: p.scale,\n            width: p.width,\n            height: p.height\n        };\n        if (!isNaN(d.scale)) {\n            d.height = Math.round(h * d.scale);\n            d.width = Math.round(w * d.scale);\n        } else if (isNaN(d.width)) {\n            div = d.height / h;\n            d.width = Math.round(w * div);\n            d.scale = div;\n        } else if (isNaN(d.height)) {\n            div = d.width / w;\n            d.height = Math.round(h * div);\n            d.scale = div;\n        } else throw new Error('[scalaresize] Invalid arguments');\n        return d;\n    }\n\n    const greatestCommonDivisor = (a, b) => b === 0 ? a : greatestCommonDivisor(b, a % b);\n\n    /**\n     * @param {number} width\n     * @param {number} height\n     *\n     * @return {number[]}\n     */\n    function reduceRatio(width, height) {\n        if (width === height) {\n            return [1, 1];\n        }\n\n        if (width < height) {\n            [width, height] = [height, width];\n        }\n\n        const divisor = greatestCommonDivisor(width, height);\n\n        return [width / divisor, height / divisor];\n    }\n\n    (function (ns) {\n        const $width = $(`#${ns}-width`),\n            $height = $(`#${ns}-height`),\n            $targets = $(`input[name=\"${ns}-target\"]`),\n            $value = $(`#${ns}-value`),\n            $output = $(`#${ns}-output`),\n            $form = $(`#${ns}-form`);\n\n        $form.on('submit', function (e) {\n            e.preventDefault();\n\n            const\n                origWidth = parseInt($width.val(), 10),\n                origHeight = parseInt($height.val(), 10),\n                target = $targets.filter(':checked').attr('value'),\n                value = parseFloat($value.val());\n\n            const result = scaleResize(origWidth, origHeight, {[target]: value});\n\n            const condensedScale = String(result.scale).replace(/(\\.\\d*?)(\\d)(\\2)(\\2+)$/, '$1$2$3');\n\n            // OUTPUT PHASE\n            $output.removeClass('d-none');\n            $output.text(`${result.width} × ${result.height} @ ${condensedScale}`);\n        }).on('reset', function () {\n            $output.addClass('d-none');\n            $form.find('.form-control').val('').trigger('change');\n        });\n\n        const cycleNames = ['width', 'height', 'scale'];\n        const cycleValues = {\n            'width': '1280',\n            'height': '480',\n            'scale': '2',\n        };\n\n        $(`#${ns}-predefined-data`).on('click', function (e) {\n            e.preventDefault();\n\n            $width.val('1920').trigger('change');\n            $height.val('1080').trigger('change');\n            const $currentTarget = $targets.filter(':checked');\n            let $nextTarget;\n            if ($currentTarget.length)\n                $nextTarget = $currentTarget;\n            else {\n                const nextTargetName = cycleNames[Math.floor(Math.random() * cycleNames.length)];\n                $nextTarget = $targets.filter(`[value=\"${nextTargetName}\"]`);\n                $nextTarget.prop('checked', true);\n            }\n            $value.val(cycleValues[$nextTarget.attr('value')]).trigger('change');\n            $form.triggerHandler('submit');\n        });\n    })('scale');\n\n    (function (ns) {\n        const $width = $(`#${ns}-width`),\n            $height = $(`#${ns}-height`),\n            $output = $(`#${ns}-output`),\n            $form = $(`#${ns}-form`);\n\n        $form.on('submit', function (e) {\n            e.preventDefault();\n\n            const\n                origWidth = parseInt($width.val(), 10),\n                origHeight = parseInt($height.val(), 10);\n\n            const result = reduceRatio(origWidth, origHeight);\n\n            // OUTPUT PHASE\n            $output.removeClass('d-none');\n            let output = result.join(':');\n            if (output === '64:27') {\n                output += ` <small>(“21:9”)</small>`;\n            }\n            $output.empty().append($('<p class=\"display-4 mb-0 font-weight-bold\" />').html(output));\n            if (result[0] !== result[1] && result[1] !== 1) {\n                $output.append(\n                    $('<p class=\"font-family-monospace mb-0\" />').text(`${result[0]} ÷ ${result[1]} = ${result[0] / result[1]}`)\n                );\n            }\n        }).on('reset', function () {\n            $output.addClass('d-none');\n            $form.find('.form-control').val('').trigger('change');\n        });\n\n        const demoData = [\n            [1920, 1080],\n            [1600, 900],\n            [1024, 768],\n            [100, 100],\n            [2560, 1080],\n        ];\n\n        $(`#${ns}-predefined-data`).on('click', function (e) {\n            e.preventDefault();\n\n            const data = demoData[Math.floor(Math.random() * demoData.length)];\n            $width.val(data[0]).trigger('change');\n            $height.val(data[1]).trigger('change');\n            $form.triggerHandler('submit');\n        });\n    })('aspectratio');\n})(jQuery);\n"]}